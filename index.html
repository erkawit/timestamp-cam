<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Geo-Location App</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;700&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>ðŸ“¸ Photo Geo-Track Pro</h1>
        <!-- Camera Section -->
        <div class="card camera-container">
            <video id="camera-view" autoplay playsinline></video>
            <canvas id="output-canvas" class="hidden"></canvas>

            <div class="controls">
                <button id="btn-toggle-camera" class="btn btn-secondary">
                    <span class="material-icons-round">cameraswitch</span> Switch Camera
                </button>
                <button id="btn-capture" class="btn btn-primary">
                    <span class="material-icons-round">camera_alt</span> Capture Photo
                </button>
                <button id="btn-retake" class="btn btn-secondary hidden">
                    <span class="material-icons-round">refresh</span> Retake
                </button>
                <button id="btn-save-manual" class="btn btn-success hidden">
                    <span class="material-icons-round">save</span> Save
                </button>
            </div>

            <p id="geo-status" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem;">
                <span class="material-icons-round" style="vertical-align: middle; font-size: 1rem;">location_on</span>
                <span id="location-text">Waiting for location...</span>
            </p>
        </div>
        <!-- Dashboard Section -->
        <div class="card">
            <div class="data-controls">
                <h2>ðŸ“‹ Data Records</h2>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="exportPDF('all')">
                        <span class="material-icons-round">picture_as_pdf</span> All Report
                    </button>
                    <button class="btn btn-secondary" onclick="openManualAddModal()">
                        <span class="material-icons-round">add_circle</span> Add Manual
                    </button>
                </div>
            </div>
            <div class="data-controls">
                <input type="text" id="search-box" class="search-input" placeholder="ðŸ” Search records...">
                <div style="display: flex; gap: 5px;">
                    <select id="report-type" class="search-input" style="width: auto;">
                        <option value="all">Report: All</option>
                        <option value="day">Report: Today</option>
                        <option value="month">Report: This Month</option>
                        <option value="year">Report: This Year</option>
                    </select>
                    <button class="btn btn-primary" onclick="generateReport()">Print Report</button>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="data-table">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Date / Time</th>
                            <th>Location (Lat, Long)</th>
                            <th>Note</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Data rows will be injected here -->
                        <tr>
                            <td colspan="5" style="text-align: center;">Loading data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Hidden Manual Add Modal (Simulated with SweetAlert, but structure kept here if needed for complexity) -->
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <!-- App Logic -->
    <script src="app.js"></script>
</body>

</html>
